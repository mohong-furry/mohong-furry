<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoHong•Jiao (墨虹)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --heading-color: #1a1a1a;
            --link-color: #0066cc;
            --link-hover-color: #0052a3;
            --code-bg: #f5f5f5;
            --code-color: #d73a49;
            --border-color: #e1e4e8;
            --blockquote-border: #dfe2e5;
            --blockquote-bg: #f6f8fa;
            --button-bg: #f0f0f0;
            --button-hover: #e0e0e0;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #0d1117;
                --text-color: #c9d1d9;
                --heading-color: #f0f6fc;
                --link-color: #58a6ff;
                --link-hover-color: #79c0ff;
                --code-bg: #161b22;
                --code-color: #ff7b72;
                --border-color: #30363d;
                --blockquote-border: #3b434b;
                --blockquote-bg: #161b22;
                --button-bg: #21262d;
                --button-hover: #30363d;
            }
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            padding: 20px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .markdown-body {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 32px;
            margin-top: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
        }

        @media (prefers-color-scheme: dark) {
            .markdown-body {
                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5), 0 1px 2px rgba(0, 0, 0, 0.4);
            }
        }

        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .language-toggle button {
            background-color: var(--button-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s ease;
        }

        .language-toggle button:hover {
            background-color: var(--button-hover);
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            color: var(--heading-color);
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            text-align: left;
        }

        h1 {
            font-size: 2em;
            border-bottom: none;
            padding-bottom: 0;
        }

        h2 {
            font-size: 1.5em;
            border-bottom: none;
            padding-bottom: 0;
        }

        h3 {
            font-size: 1.25em;
        }

        h4 {
            font-size: 1em;
        }

        h5 {
            font-size: 0.875em;
        }

        h6 {
            font-size: 0.85em;
            color: var(--text-color);
        }

        p {
            margin-bottom: 16px;
            text-align: left;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
        }

        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }

        ul,
        ol {
            margin-bottom: 16px;
            padding-left: 2em;
            text-align: left;
        }

        li {
            margin-bottom: 4px;
        }

        li>ul,
        li>ol {
            margin-top: 4px;
            margin-bottom: 4px;
        }

        code {
            background-color: var(--code-bg);
            color: var(--code-color);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
            font-size: 85%;
        }

        pre {
            background-color: var(--code-bg);
            padding: 16px;
            border-radius: 6px;
            overflow: auto;
            margin-bottom: 16px;
        }

        pre code {
            background-color: transparent;
            padding: 0;
            color: var(--text-color);
        }

        blockquote {
            border-left: 4px solid var(--blockquote-border);
            background-color: var(--blockquote-bg);
            padding: 8px 16px;
            margin-bottom: 16px;
            color: var(--text-color);
        }

        blockquote p {
            margin-bottom: 0;
        }

        hr {
            height: 0.25em;
            padding: 0;
            margin: 24px 0;
            background-color: var(--border-color);
            border: 0;
        }

        strong {
            font-weight: 600;
        }

        em {
            font-style: italic;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 16px;
        }

        table th,
        table td {
            padding: 6px 13px;
            border: 1px solid var(--border-color);
        }

        table th {
            font-weight: 600;
            background-color: var(--code-bg);
        }

        table tr:nth-child(2n) {
            background-color: var(--blockquote-bg);
        }

        .loading {
            text-align: left;
            padding: 20px;
            color: var(--text-color);
        }
    </style>
</head>

<body>
    <div class="language-toggle">
        <button id="langBtn" onclick="toggleLanguage()">English</button>
    </div>

    <div class="container">
        <div class="markdown-body">
            <div id="content" class="loading">加载中...</div>
        </div>
    </div>

    <script>
        let currentLanguage = 'zh';
        let markdownContent = '';

        class MarkdownParser {
            constructor() {
                this.rules = [
                    { pattern: /^### (.+)$/gm, replacement: '<h3>$1</h3>' },
                    { pattern: /^## (.+)$/gm, replacement: '<h2>$1</h2>' },
                    { pattern: /^# (.+)$/gm, replacement: '<h1>$1</h1>' },

                    { pattern: /\*\*(.+?)\*\*/g, replacement: '<strong>$1</strong>' },

                    { pattern: /\*(.+?)\*/g, replacement: '<em>$1</em>' },

                    { pattern: /`([^`]+)`/g, replacement: '<code>$1</code>' },

                    { pattern: /\[([^\]]+)\]\(([^)]+)\)/g, replacement: '<a href="$2" target="_blank">$1</a>' },
                ];
            }

            parse(markdown, language) {
                const sections = markdown.split(/^---$/m);

                let targetSection = '';
                let navigationSection = '';

                if (sections.length >= 3) {
                    navigationSection = sections[2].trim();
                }

                if (language === 'zh' && sections.length > 0) {
                    targetSection = sections[0].trim() + (navigationSection ? '\n\n' + navigationSection : '');
                } else if (sections.length > 1) {
                    targetSection = sections[1].trim() + (navigationSection ? '\n\n' + navigationSection : '');
                } else {
                    targetSection = markdown;
                }

                let html = targetSection;

                html = this.parseList(html);

                this.rules.forEach(rule => {
                    html = html.replace(rule.pattern, rule.replacement);
                });

                html = this.parseParagraphs(html);

                return html;
            }

            parseList(text) {
                const lines = text.split('\n');
                let result = [];
                let inList = false;
                let listLevel = 0;
                let listStack = [];

                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    let indent = 0;
                    let content = '';
                    let isListItem = false;

                    if (line.match(/^- /)) {
                        indent = 0;
                        content = line.substring(2);
                        isListItem = true;
                    } else if (line.match(/^\t\t- /)) {
                        indent = 2;
                        content = line.substring(4);
                        isListItem = true;
                    } else if (line.match(/^\t- /)) {
                        indent = 1;
                        content = line.substring(3);
                        isListItem = true;
                    } else if (line.match(/^      - /)) {
                        indent = 3;
                        content = line.substring(8);
                        isListItem = true;
                    } else if (line.match(/^    - /)) {
                        indent = 2;
                        content = line.substring(6);
                        isListItem = true;
                    } else if (line.match(/^  - /)) {
                        indent = 1;
                        content = line.substring(4);
                        isListItem = true;
                    }

                    if (isListItem) {
                        if (!inList) {
                            result.push('<ul>');
                            inList = true;
                            listLevel = indent;
                            listStack.push('ul');
                        } else if (indent > listLevel) {
                            result.push('<ul>');
                            listLevel = indent;
                            listStack.push('ul');
                        } else if (indent < listLevel) {
                            while (listLevel > indent && listStack.length > 0) {
                                result.push('</li>');
                                result.push('</' + listStack.pop() + '>');
                                listLevel--;
                            }
                            result.push('</li>');
                        } else if (result[result.length - 1] !== '<ul>') {
                            result.push('</li>');
                        }

                        result.push('<li>' + content);
                    } else {
                        if (inList) {
                            while (listStack.length > 0) {
                                result.push('</li>');
                                result.push('</' + listStack.pop() + '>');
                            }
                            inList = false;
                            listLevel = 0;
                        }
                        result.push(line);
                    }
                }

                if (inList) {
                    while (listStack.length > 0) {
                        result.push('</li>');
                        result.push('</' + listStack.pop() + '>');
                    }
                }

                return result.join('\n');
            }

            parseParagraphs(html) {
                const lines = html.split('\n');
                let result = [];
                let inParagraph = false;
                let paragraphContent = [];

                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();

                    if (line.startsWith('<') || line === '') {
                        if (inParagraph && paragraphContent.length > 0) {
                            result.push('<p>' + paragraphContent.join(' ') + '</p>');
                            paragraphContent = [];
                            inParagraph = false;
                        }
                        if (line !== '') {
                            result.push(line);
                        }
                    } else {
                        paragraphContent.push(line);
                        inParagraph = true;
                    }
                }

                if (inParagraph && paragraphContent.length > 0) {
                    result.push('<p>' + paragraphContent.join(' ') + '</p>');
                }

                return result.join('\n');
            }
        }

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            const btn = document.getElementById('langBtn');
            btn.textContent = currentLanguage === 'zh' ? 'English' : '中文';
            renderMarkdown();
        }

        function renderMarkdown() {
            const parser = new MarkdownParser();
            const html = parser.parse(markdownContent, currentLanguage);
            document.getElementById('content').innerHTML = html;
        }

        async function loadMarkdown() {
            try {
                const response = await fetch('README.md');
                if (!response.ok) {
                    throw new Error('无法加载 README.md');
                }

                markdownContent = await response.text();
                renderMarkdown();
            } catch (error) {
                document.getElementById('content').innerHTML =
                    '<p style="color: var(--code-color);">错误: ' + error.message + '</p>';
            }
        }

        window.addEventListener('DOMContentLoaded', loadMarkdown);
    </script>
</body>

</html>